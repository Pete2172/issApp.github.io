(this["webpackJsonpiss-react"]=this["webpackJsonpiss-react"]||[]).push([[0],{10:function(t,a,e){t.exports=e(26)},15:function(t,a,e){},16:function(t,a,e){},17:function(t,a,e){},26:function(t,a,e){"use strict";e.r(a);var i=e(0),n=e.n(i),s=e(3),l=e.n(s),o=(e(15),e(4)),r=e(5),d=e(8),h=e(6),c=e(1),m=e(9);e(16),e(17);function u(t,a){var e,i;switch(a){case"Date & Time":var n=new Date(1e3*t);e=n.toLocaleDateString()+", "+n.toLocaleTimeString();break;case"Longitude":e=(i=Number(t).toFixed(2))<0?-1*i+"\xb0 W":i+"\xb0 E";break;case"Latitude":e=(i=Number(t).toFixed(2))<0?-1*i+"\xb0 S":i+"\xb0 N";break;case"Altitude":e=(i=Number(t).toFixed(2))+" km";break;case"Velocity":e=(i=Number(t).toFixed(2))+" km/h"}return e}var g=function(t){return n.a.createElement("div",{className:"data"},n.a.createElement("p",null,n.a.createElement("strong",{id:"data__label"},"> ",t.name)),n.a.createElement("input",{id:"input",type:"text",value:u(t.data,t.name)}))},p=e(7),w=function(t){var a=[t.lat,t.long];return n.a.createElement(p.ReactBingmaps,{bingmapKey:t.bingkey,center:a,position:"relative",mapTypeId:"aerial",width:"100px"})},v=function(t){function a(){var t;return Object(o.a)(this,a),(t=Object(d.a)(this,Object(h.a)(a).call(this))).state={url:"https://api.wheretheiss.at/v1/satellites/25544",light:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Whole_world_-_land_and_oceans_12000.jpg/1024px-Whole_world_-_land_and_oceans_12000.jpg",dark:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/af/BlackMarble20161km.jpg/1024px-BlackMarble20161km.jpg",key:"kdZJmZ4vgujbABzslMTx~LJdezJEfoUd_AGfouXIjRg~AgDg1zk0AZwHJIi709KW2T97_JL8p5AJS8szvnwdLyFQRNMyc0bfsVGJUBnxIve9",image1_loaded:!1,image2_loaded:!1,iss:{latitude:0,longitude:0,altitude:0,velocity:0,visibility:"",timestamp:0,solar_lat:0,solar_lon:0}},t.lightmap=new Image,t.lightmap.crossOrigin="anonymous",t.lightmap.src=t.state.light,t.lightmap.onload=function(){t.state.image1_loaded=!0},t.darkmap=new Image,t.darkmap.crossOrigin="anonymous",t.darkmap.src=t.state.dark,t.darkmap.onload=function(){t.state.image2_loaded=!0},t.downloadJsonFile=t.downloadJsonFile.bind(Object(c.a)(t)),t.parseData=t.parseData.bind(Object(c.a)(t)),t.timerDownload=t.timerDownload.bind(Object(c.a)(t)),t.drawDayLightMap=t.drawDayLightMap.bind(Object(c.a)(t)),t.timerDraw=t.timerDraw.bind(Object(c.a)(t)),t.lat=0,t.lon=0,t}return Object(m.a)(a,t),Object(r.a)(a,[{key:"downloadJsonFile",value:function(){var t=this;return fetch(this.state.url).then((function(t){return t.json()})).then((function(a){t.parseData(a)})).catch((function(t){window.alert("Something went wrong with downloading data from url!")}))}},{key:"parseData",value:function(t){var a=t.solar_lon>180?t.solar_lon-360:t.solar_lon;this.setState({iss:{latitude:t.latitude,longitude:t.longitude,altitude:t.altitude,velocity:t.velocity,visibility:t.visibility,timestamp:t.timestamp,solar_lat:t.solar_lat,solar_lon:a},data_loaded:!0}),this.lat=this.state.iss.latitude,this.lon=this.state.iss.longitude,this.sun_lat=this.state.iss.solar_lat,this.sun_lon=this.state.iss.solar_lon}},{key:"drawDayLightMap",value:function(){if(!0===this.state.image2_loaded&&!0===this.state.image1_loaded){var t=this.refs.canvas,a=t.getContext("2d");a.drawImage(this.darkmap,0,0,t.width,t.height);var e=a.getImageData(0,0,t.width,t.height),i=e.data;this.refs.canvas_def.getContext("2d").drawImage(this.lightmap,0,0,t.width,t.height);for(var n=this.refs.canvas_def.getContext("2d").getImageData(0,0,t.width,t.height).data,s=0;s<t.height;s++)for(var l=0;l<t.width;l++){var o=l/2>=180?l/2-180:-(180-l/2),r=s/2<=90?90-s/2:-(s/2-90),d=4*(s*t.width+l);(m=r,u=o,g=this.sun_lat,p=this.sun_lon,m*=Math.PI/180,u*=Math.PI/180,g*=Math.PI/180,p*=Math.PI/180,Math.acos(Math.sin(m)*Math.sin(g)+Math.cos(m)*Math.cos(g)*Math.cos(u-p))*(180/Math.PI))<=90&&(i[d]=n[d],i[++d]=n[d],i[++d]=n[d]);var h=Math.pow(o-this.lon,2)+Math.pow(r-this.lat,2),c=4*(s*t.width+l);h>=Math.pow(2,2)&&h<=Math.pow(5,2)&&(i[c]=7,i[++c]=79,i[++c]=100)}a.putImageData(e,0,0)}var m,u,g,p}},{key:"timerDownload",value:function(){this.downloadJsonFile(),this.drawDayLightMap()}},{key:"timerDraw",value:function(){this.drawDayLightMap()}},{key:"render",value:function(){var t=n.a.createElement("div",{className:"labels"},n.a.createElement(g,{data:this.state.iss.longitude,name:"Longitude"}),n.a.createElement(g,{data:this.state.iss.latitude,name:"Latitude"}),n.a.createElement(g,{data:this.state.iss.altitude,name:"Altitude"}),n.a.createElement(g,{data:this.state.iss.velocity,name:"Velocity"}),n.a.createElement(g,{data:this.state.iss.timestamp,name:"Date & Time"})),a=n.a.createElement(w,{lat:this.lat,long:this.lon,bingkey:this.state.key}),e=n.a.createElement("div",{className:"imag"},n.a.createElement("canvas",{ref:"canvas",width:720,height:360},n.a.createElement("canvas",{ref:"canvas_def",width:720,height:360,className:"hidden"})));return n.a.createElement("div",{className:"app"},n.a.createElement("div",{className:"header"},"Where is ISS?"),t,e,n.a.createElement("div",{style:{clear:"both",height:"40vh",width:"950px",marginLeft:"1%",float:"left",left:"30px",border:"double white 3px"}},a))}},{key:"componentDidMount",value:function(){setInterval(this.timerDownload,1e3)}}]),a}(i.Component);l.a.render(n.a.createElement(v,null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.28e1bb2d.chunk.js.map